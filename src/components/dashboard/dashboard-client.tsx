
'use client';
import { useState, useEffect, useMemo, useCallback } from 'react';
import { Card, CardContent, CardDescription, CardFooter, CardHeader, CardTitle } from '@/components/ui/card';
import { Button, buttonVariants } from '@/components/ui/button';
import { Apple, BrainCircuit, Droplet, Dumbbell, HeartPulse, Moon, Salad, Scale, Sheet, UtensilsCrossed, Zap, Lightbulb, UserCheck, Flame, CloudSun, ArrowRight, Lock, Calendar, RefreshCw } from 'lucide-react';
import Image from 'next/image';
import { DataEntryDialog } from '@/components/dashboard/data-entry-dialog';
import { cn } from '@/lib/utils';
import { useAuth } from '../auth/auth-provider';
import { ClientProfile, TIER_ACCESS, UserTier } from '@/types';
import { UpgradeModal } from '../modals/upgrade-modal';
import { useRouter } from 'next/navigation';
import { Challenge, getUpcomingIndulgences, resetBingeStreakAction } from '@/services/firestore';
import { getLatestChallengeForClient } from '@/app/challenges/actions';
import { Skeleton } from '../ui/skeleton';
import Link from 'next/link';
import { Badge } from '../ui/badge';
import { getAssetLibrary } from '@/services/assets';
import { InsightsDialog } from '../insights/insights-dialog';
import { Trophy } from 'lucide-react';
import { GoogleAd } from '../ads/google-ad';
import { useDashboardActions } from '@/contexts/DashboardActionsContext';
import { differenceInCalendarDays, format, formatDistanceToNow } from 'date-fns';
import { suggestHealthyAlternatives } from '@/ai/flows/suggest-healthy-alternatives';
import { useToast } from '@/hooks/use-toast';
import { InsightResponseModal } from '../modals/insight-response-modal';
import { CalendarDialog } from '../calendar/calendar-dialog';
import {
  AlertDialog,
  AlertDialogAction,
  AlertDialogCancel,
  AlertDialogContent,
  AlertDialogDescription,
  AlertDialogFooter,
  AlertDialogHeader,
  AlertDialogTitle,
} from "@/components/ui/alert-dialog";
import { Loader2 } from 'lucide-react';
import { doc, onSnapshot } from 'firebase/firestore';
import { db } from '@/lib/firebase';
import { FirstUseEducationalModal } from '../modals/FirstUseEducationalModal';
import { educationalContentLibrary, EducationalContent } from '@/lib/educational-content';
import quotes from '@/lib/quotes.json';


const pillarsAndTools = [
  { id: 'nutrition', label: 'Nutrition', icon: UtensilsCrossed, color: 'text-foreground', bgColor: 'bg-amber-400', borderColor: 'border-amber-600', requiredTier: 'free', quotes: ["Whole foods nourish the body deeply, providing sustained energy without the crashes of processed alternatives—why? They digest slowly, stabilizing blood sugar for natural satiety and reduced food noise.", "Prioritize protein in every meal to curb overeating—why? It boosts the thermic effect, increasing calorie burn by 10-15% and promoting hormone balance for effortless fullness.", "Embrace high-protein whole foods like eggs or nuts—why? They release energy steadily, minimizing spikes and crashes that fuel cravings, making habits feel intuitive over time.", "Avoid ultra-processed snacks to quiet food noise—why? Additives disrupt natural hunger signals, but whole foods restore balance for joyful, sustainable eating.", "Build your plate with colorful vegetables and lean proteins—why? Fiber and nutrients enhance metabolism, reducing the urge for empty calories and fostering lifelong ease.", "Choose whole grains over refined ones—why? They provide lasting satiety through slow digestion, helping prevent the relentless thoughts that lead to overeating.", "Incorporate fatty fish for omega-3s—why? They support brain health and hormone regulation, diminishing emotional eating triggers for a calmer relationship with your body.", "Opt for natural sweetness from fruits—why? Unlike added sugars, they come with fiber that stabilizes blood sugar, curbing crashes and promoting habit formation without effort.", "Focus on nutrient-dense meals to enhance vitality—why? They fuel muscle repair and energy processing, making it easier to trust your body's signals over time.", "Limit processed sugars to reclaim control—why? They spike dopamine unnaturally, but whole foods rewire responses for natural satisfaction and reduced cravings.", "Pair proteins with greens for optimal digestion—why? This combination slows absorption, preventing hunger rebounds and building intuitive eating habits effortlessly.", "Emphasize whole food sources of calcium like leafy greens—why? They support bone health without the additives that disrupt gut balance and amplify food focus.", "Incorporate healthy fats from avocados or nuts—why? They promote prolonged fullness, reducing the mental pull toward snacks and fostering joyful meals.", "Choose unprocessed meats for protein—why? They provide essential amino acids without preservatives, stabilizing energy and minimizing binge triggers.", "Explore fermented foods for gut health—why? They enhance microbiome diversity, reducing inflammation that can heighten cravings and food noise.", "Prioritize fiber-rich whole foods—why? Fiber slows digestion, enhancing leptin signaling for better fullness and effortless portion awareness.", "Avoid artificial sweeteners to protect your signals—why? They confuse the brain's reward system, but natural whole foods restore true taste satisfaction.", "Incorporate berries for antioxidants—why? They combat oxidative stress, supporting metabolic health and reducing the drive for comfort eating.", "Focus on balanced plates with veggies and proteins—why? This synergy stabilizes insulin, preventing the crashes that lead to habitual overeating.", "Embrace seeds like chia for omega-3s—why? They promote brain health, diminishing emotional hunger and fostering mindful eating habits.", "Limit refined carbs to enhance clarity—why? They cause rapid spikes, but whole foods provide steady fuel for focused, noise-free days.", "Choose legumes for plant-based protein—why? They digest slowly, boosting satiety hormones and reducing the need for constant snacking.", "Incorporate herbs and spices for flavor—why? They enhance satisfaction without calories, helping rewire preferences away from processed tastes.", "Prioritize wild-caught fish—why? Rich in nutrients, they support hormone balance, curbing cravings without the contaminants in farmed varieties.", "Avoid hidden sugars in sauces—why? They disrupt gut health, but fresh ingredients restore balance for intuitive hunger management.", "Embrace olive oil for healthy fats—why? It promotes fullness through oleic acid, reducing binge tendencies and supporting habit formation.", "Focus on variety in whole foods—why? Diverse nutrients enhance microbiome health, reducing inflammation that amplifies food noise.", "Choose grass-fed meats—why? Higher omega-3s support brain function, diminishing emotional triggers for overeating.", "Incorporate cruciferous veggies—why? They aid detoxification, stabilizing energy and reducing the pull toward processed comforts.", "Prioritize home-cooked meals—why? Control over ingredients minimizes additives, fostering true satiety and joyful eating habits.", "Avoid fried processed foods—why? Trans fats disrupt hormone signals, but baked whole foods restore balance for reduced cravings.", "Embrace nuts for snacks—why? Their protein and fat combo provides lasting energy, curbing the need for sugary alternatives.", "Focus on seasonal produce—why? Freshness enhances nutrient density, supporting metabolic health and intuitive portion control.", "Choose full-fat dairy if tolerated—why? It provides better satiety than low-fat versions loaded with sugars, reducing binge risks.", "Incorporate bone broth for collagen—why? It supports gut lining, reducing inflammation that can heighten food focus.", "Avoid energy bars with additives—why? They spike blood sugar, but whole food snacks stabilize for effortless habit maintenance.", "Embrace eggs for complete protein—why? They boost choline for brain health, reducing emotional eating triggers.", "Prioritize organic where possible—why? Reduces pesticide exposure, supporting hormone balance and clear hunger signals.", "Choose fermented dairy like yogurt—why? Probiotics enhance gut health, diminishing cravings from microbiome imbalance.", "Avoid canned soups with preservatives—why? They disrupt natural flavors, but homemade versions restore taste satisfaction.", "Incorporate leafy greens daily—why? Their folate supports mood stability, reducing stress-induced overeating.", "Focus on anti-inflammatory foods—why? They lower cortisol responses, supporting intuitive eating without noise.", "Choose seafood for selenium—why? It supports thyroid health, stabilizing metabolism and hunger signals.", "Avoid flavored yogurts with sugars—why? They cause crashes, but plain with berries provides steady energy.", "Embrace cruciferous for detox—why? They support liver function, reducing toxin buildup that amplifies cravings.", "Prioritize zinc-rich foods—why? Zinc balances hormones, reducing emotional hunger fluctuations.", "Incorporate mushrooms for vitamin D—why? They support immune health, indirectly stabilizing mood and eating patterns.", "Choose avocados for healthy fats—why? They promote fullness, reducing the mental pull toward processed snacks.", "Avoid artificial colors in foods—why? They disrupt gut health, but natural pigments from veggies enhance satisfaction.", "Embrace turmeric for curcumin—why? It reduces inflammation, supporting stable energy and reduced food focus.", "Focus on omega-3 rich foods—why? They balance brain chemistry, diminishing emotional eating triggers.", "Choose beets for nitrates—why? They support blood flow, enhancing nutrient delivery for better satiety.", "Incorporate garlic for allicin—why? It supports gut health, reducing cravings from microbiome issues.", "Prioritize ginger for digestion—why? It calms the gut, preventing discomfort that leads to overeating.", "Choose citrus for vitamin C—why? It boosts absorption of iron from plants, supporting energy without crashes.", "Avoid hidden fats in processed meats—why? They disrupt hormone balance, but lean whole proteins stabilize.", "Embrace quinoa for complete protein—why? It provides fiber for slow digestion, promoting lasting fullness.", "Focus on colorful peppers—why? Their antioxidants support metabolism, reducing oxidative stress that amplifies hunger.", "Choose lentils for plant protein—why? They stabilize blood sugar, curbing the cycle of spikes and crashes.", "Incorporate cocoa for flavonoids—why? It supports mood health, reducing emotional triggers for eating.", "Prioritize wild berries—why? Their low sugar and high fiber reduce glycemic impact for steady energy.", "Avoid refined oils—why? They promote inflammation, but whole food fats like olives support balance.", "Embrace salmon for DHA—why? It supports brain health, diminishing cravings from cognitive imbalance.", "Focus on cruciferous sprouts—why? They enhance detoxification, supporting clear hunger signals.", "Choose turkey for tryptophan—why? It supports serotonin production, reducing stress-induced hunger.", "Incorporate chia seeds—why? Their gel-forming fiber promotes fullness, reducing snack urges.", "Prioritize pasture-raised eggs—why? Higher nutrients support hormone balance for intuitive eating.", "Avoid flavored nuts with sugars—why? They spike cravings, but plain nuts provide steady satiety.", "Embrace kale for vitamins—why? It supports liver health, reducing toxin buildup that amplifies food noise.", "Focus on sardines for omega-3s—why? They reduce inflammation, supporting stable mood and hunger.", "Choose broccoli for sulforaphane—why? It supports detox, enhancing metabolic health for reduced cravings.", "Incorporate almonds for magnesium—why? They calm the nervous system, reducing stress-eating triggers.", "Prioritize grass-fed butter—why? It provides butyrate for gut health, supporting satiety signals.", "Avoid granola with added sugars—why? It causes crashes, but homemade with nuts provides steady energy.", "Embrace oysters for zinc—why? They support hormone balance, reducing emotional hunger fluctuations.", "Focus on pumpkin seeds—why? Their nutrients support thyroid health for stable metabolism.", "Choose liver for vitamin A—why? It supports vision and immunity, indirectly stabilizing energy.", "Incorporate cauliflower for versatility—why? Low-carb swaps reduce glycemic load for steady hunger control.", "Prioritize bone marrow—why? It provides glycine for gut healing, reducing inflammation-related cravings.", "Avoid energy drinks with sugars—why? They spike and crash, but herbal teas provide calm energy.", "Embrace organ meats—why? Nutrient-dense for hormone support, reducing deficiencies that amplify hunger.", "Focus on seaweed for iodine—why? It supports thyroid function for balanced metabolism and signals.", "Choose spirulina for protein—why? Plant-based complete protein for satiety without animal products.", "Incorporate hemp seeds—why? Omega-3s support brain health, reducing emotional eating triggers.", "Prioritize fermented veggies—why? Probiotics enhance gut health, reducing cravings from imbalance.", "Avoid store-bought dressings—why? Hidden sugars disrupt balance, but homemade support clean eating.", "Embrace coconut for MCTs—why? Quick energy without crashes, supporting satiety signals.", "Focus on cacao nibs—why? Antioxidants support mood, reducing stress-induced hunger.", "Choose grass-fed yogurt—why? Probiotics and protein for gut health and lasting fullness.", "Incorporate flaxseeds—why? Fiber and omega-3s promote satiety, reducing snack urges.", "Prioritize bison for lean protein—why? High nutrients support metabolism without excess fat.", "Avoid flavored protein powders—why? Additives disrupt signals, but whole sources provide clean energy.", "Embrace venison—why? Lean protein for satiety, supporting active lifestyles without heaviness.", "Focus on rabbit—why? High protein, low fat for balanced meals and hormone support.", "Choose duck for healthy fats—why? Supports fullness without the crashes of processed alternatives.", "Incorporate elk—why? Nutrient-dense protein for sustained energy and reduced food noise.", "Prioritize lamb—why? Rich in zinc for hormone balance and craving control.", "Avoid processed plant milks—why? Additives disrupt gut, but fresh nuts provide natural benefits.", "Embrace goat cheese—why? Easier digestion for some, supporting satiety without discomfort.", "Focus on sustainable seafood—why? Omega-3s support brain health, reducing emotional hunger triggers."] },
  { id: 'activity', label: 'Activity', icon: Flame, color: 'text-foreground', bgColor: 'bg-orange-400', borderColor: 'border-orange-600', requiredTier: 'free', quotes: ["Embrace joyful movement like a gentle walk—why? It releases endorphins to buffer stress, creating a positive cycle that reduces food noise effortlessly.", "Turn daily steps into a celebration of vitality—why? Activity boosts metabolism by 5-10%, enhancing natural energy without the need for willpower.", "Let dancing be your playful escape—why? It elevates mood through serotonin, diminishing emotional eating triggers and fostering resilience.", "Explore stretching as a mindful ritual—why? It improves flexibility and circulation, supporting better sleep and quieter hunger signals.", "Make play your pillar—why? Joyful activity rewires the brain for automatic habits, reducing cravings by balancing ghrelin naturally.", "Walk in nature to reconnect—why? It lowers cortisol, calming the mind and preventing stress-induced binges with effortless grace.", "Cycle through your day with ease—why? Moderate movement enhances insulin sensitivity, stabilizing blood sugar for sustained satiety.", "Yoga flows for inner harmony—why? It combines breath and motion to reduce anxiety, quieting food noise through mindful presence.", "Swim toward serenity—why? Water-based activity soothes joints and boosts endorphins, fostering a joyful relationship with your body.", "Hike to higher energy—why? It builds endurance, improving oxygen delivery and reducing fatigue-driven overeating.", "Play sports for fun—why? Team activities enhance social bonds, reducing isolation that can amplify emotional hunger.", "Garden as gentle exercise—why? It connects you to nature, lowering stress hormones and promoting calm, intuitive eating.", "Dance freely to release—why? Rhythmic movement elevates dopamine naturally, curbing the need for food-based rewards.", "Strength train with compassion—why? Building muscle increases calorie burn at rest, supporting effortless metabolic balance.", "Pilates for core strength—why? It enhances posture and awareness, reducing physical discomfort that leads to comfort eating.", "Run with joy, not rush—why? Aerobic activity suppresses appetite short-term, helping distinguish true hunger from false cues.", "Tai chi for tranquility—why? Slow movements calm the nervous system, reducing cortisol-driven cravings.", "Jump rope for playfulness—why? It boosts cardiovascular health, improving nutrient delivery and energy stability.", "Climb stairs as a simple step—why? It builds leg strength, enhancing daily mobility and reducing sedentary hunger pangs.", "Practice balance exercises—why? They improve proprioception, fostering body confidence and mindful eating habits.", "Row for rhythmic flow—why? It engages full body, releasing tension and promoting better sleep quality.", "Skate for freedom—why? Gliding motion enhances coordination, reducing stress and emotional eating triggers.", "Lift weights mindfully—why? It supports hormone regulation, balancing testosterone for steady mood and appetite.", "Do bodyweight exercises—why? Convenient and effective, they build strength without equipment, fostering consistent habits.", "Engage in team games—why? Social interaction boosts oxytocin, reducing loneliness-driven binges.", "Practice qigong—why? It harmonizes energy, lowering inflammation and supporting natural satiety signals.", "Cycle outdoors—why? Fresh air and motion enhance vitamin D absorption, boosting mood and reducing cravings.", "Do calisthenics—why? It builds functional strength, improving daily tasks and body awareness for intuitive hunger control.", "Swim laps calmly—why? Low-impact cardio soothes joints, reducing pain that can lead to comfort eating.", "Hike mindfully—why? Connecting with nature lowers cortisol, calming the mind for clearer hunger cues.", "Play tennis for fun—why? It combines cardio and coordination, enhancing brain function and reducing stress-eating.", "Do yoga nidra—why? Deep relaxation restores energy, balancing hormones for reduced nighttime cravings.", "Walk barefoot—why? Grounding connects you to earth, reducing inflammation and promoting calm eating habits.", "Engage in martial arts—why? Discipline and movement build resilience, curbing impulsive food responses.", "Garden actively—why? Tending plants provides gentle exertion, fostering mindfulness and reduced food focus.", "Dance to your favorite music—why? It elevates heart rate joyfully, boosting endorphins for natural mood stability.", "Practice pilates flows—why? Core focus enhances posture, reducing physical stress that amplifies hunger.", "Run intervals gently—why? It improves cardiovascular efficiency, stabilizing energy without exhaustion.", "Climb for adventure—why? It builds grip strength and confidence, reducing anxiety-driven eating.", "Row rhythmically—why? Full-body engagement releases tension, promoting better sleep and hunger balance.", "Skate with freedom—why? Gliding motion enhances balance, fostering body trust for intuitive choices.", "Lift mindfully—why? Strength gains support metabolism, reducing the pull of sedentary cravings.", "Do tai chi daily—why? Slow movements calm the nervous system, diminishing emotional hunger signals.", "Jump rope playfully—why? It boosts coordination and joy, curbing boredom-related overeating.", "Practice balance poses—why? They enhance stability, reducing falls and promoting active longevity.", "Engage in group fitness—why? Community connection boosts oxytocin, reducing isolation-driven binges.", "Qigong for energy flow—why? It harmonizes body and mind, lowering stress that amplifies food noise.", "Cycle through nature—why? Scenic views elevate mood, reducing the need for comfort foods.", "Do calisthenics routines—why? Bodyweight exercises build strength effortlessly, fostering habit consistency.", "Swim for serenity—why? Water immersion soothes, reducing inflammation and hunger fluctuations.", "Hike to explore—why? Immersion in nature lowers cortisol, promoting calm and clear hunger cues.", "Play sports recreationally—why? Fun competition boosts dopamine naturally, curbing food rewards.", "Strengthen with compassion—why? Gentle lifts build resilience, reducing stress-eating tendencies.", "Pilates for alignment—why? It enhances core awareness, fostering mindful responses to hunger.", "Run with rhythm—why? Steady pace balances hormones, reducing post-exercise overeating urges.", "Yoga for unity—why? Breath and motion integrate body-mind, diminishing emotional eating triggers.", "Walk with purpose—why? Mindful steps improve circulation, stabilizing energy without effort.", "Dance freely—why? Expressive movement releases joy, reducing the mental pull of snacks.", "Climb steadily—why? Gradual ascent builds endurance, fostering patience in habit formation.", "Row for harmony—why? Synchronized pulls calm the mind, reducing anxiety-driven hunger.", "Skate smoothly—why? Gliding fosters flow state, quieting food-related thoughts effortlessly.", "Lift for strength—why? Progressive gains empower, reducing feelings of helplessness in eating habits.", "Tai chi for peace—why? Fluid motions lower tension, promoting serene responses to cravings.", "Jump for joy—why? Playful bounds elevate mood, curbing emotional eating patterns.", "Balance with grace—why? Stability exercises enhance body confidence, fostering intuitive nourishment.", "Group play for connection—why? Shared activity boosts belonging, reducing isolation-fueled binges.", "Qigong for vitality—why? Energy practices harmonize, lowering inflammation-related hunger signals.", "Cycle for freedom—why? Open paths liberate the mind, reducing stress-induced food focus.", "Calisthenics for empowerment—why? Body control builds self-efficacy, diminishing impulsive eating.", "Swim for flow—why? Aquatic rhythm soothes, balancing hormones for reduced cravings.", "Hike for discovery—why? Trail exploration fosters curiosity, redirecting from food thoughts.", "Sports for camaraderie—why? Team spirit uplifts, reducing loneliness-driven overeating.", "Strengthen gently—why? Mindful lifts build resilience, supporting calm hunger management.", "Pilates for poise—why? Controlled movements enhance awareness, fostering mindful satiety.", "Run for release—why? Steady strides free tension, balancing mood without food comforts.", "Yoga for serenity—why? Poses and breath calm the nervous system, quieting craving urges.", "Walk for reflection—why? Gentle paces invite introspection, reducing habitual snacking.", "Dance for expression—why? Creative motion channels emotions, diminishing stress-eating needs.", "Climb for achievement—why? Reaching heights builds confidence, fostering control over hunger.", "Row for rhythm—why? Steady pulls synchronize body-mind, stabilizing energy signals.", "Skate for glide—why? Smooth motion enhances flow, reducing mental food distractions.", "Lift for empowerment—why? Strength gains foster self-trust, curbing impulsive responses.", "Tai chi for tranquility—why? Slow flows cultivate peace, lowering binge triggers.", "Jump for exhilaration—why? Playful leaps elevate spirits, redirecting from comfort foods.", "Balance for stability—why? Centered poses build body awareness, enhancing satiety cues.", "Group fitness for community—why? Shared energy uplifts, reducing isolation-related cravings.", "Qigong for balance—why? Energy harmonization calms, fostering mindful hunger responses.", "Cycle for exploration—why? New paths inspire, diminishing boredom-driven eating.", "Calisthenics for strength—why? Body mastery empowers, reducing emotional food reliance.", "Swim for immersion—why? Water envelops, soothing stress and quieting hunger noise.", "Hike for connection—why? Nature bonds deepen presence, reducing mental food chatter.", "Sports for fun—why? Playful competition boosts joy, curbing stress-eating habits.", "Strengthen with joy—why? Uplifting lifts build resilience, fostering calm responses.", "Pilates for flow—why? Fluid movements enhance intuition, quieting craving signals.", "Run for freedom—why? Open strides liberate, reducing confined food thoughts.", "Yoga for integration—why? Unified practice balances, diminishing binge urges.", "Walk for peace—why? Serene steps calm the mind, fostering hunger harmony.", "Dance for liberation—why? Free expression releases, reducing emotional eating pulls.", "Climb for perspective—why? Higher views inspire, shifting focus from food noise.", "Row for unity—why? Synchronized effort harmonizes, balancing body and appetite signals."] },
  { id: 'sleep', label: 'Sleep', icon: Moon, color: 'text-foreground', bgColor: 'bg-indigo-400', borderColor: 'border-indigo-600', requiredTier: 'free', quotes: ["Prioritize restful nights to balance your hormones—why? Quality sleep reduces ghrelin levels, curbing morning hunger and fostering effortless control over cravings.", "Create a calming bedtime routine—why? It signals your body to wind down, enhancing melatonin production for deeper, restorative sleep and renewed energy.", "Aim for 7-9 hours of uninterrupted sleep—why? This optimizes recovery, balancing leptin and ghrelin to minimize food noise and promote joyful mornings.", "Dim lights an hour before bed—why? It boosts natural melatonin, improving sleep quality and reducing the fatigue that amplifies emotional eating.", "Embrace naps under 3 hours when needed—why? They compensate for short nights, stabilizing hormones and preventing craving spikes from sleep debt.", "Track your sleep patterns gently—why? Awareness reveals trends, like irregular bedtimes raising ghrelin, allowing effortless adjustments for better rest.", "Wind down with deep breathing—why? It lowers cortisol, preparing your body for sleep and reducing stress-induced disruptions to hunger signals.", "Create a cool, dark sleep environment—why? It enhances sleep efficiency, supporting hormone regulation for fewer cravings and sustained vitality.", "Avoid screens before bed—why? Blue light suppresses melatonin, but a screen-free routine restores natural rhythms for effortless, quality rest.", "Reflect on your day's joys before sleep—why? Positive thoughts reduce anxiety, improving sleep depth and balancing appetite hormones overnight.", "Incorporate magnesium-rich foods—why? They relax muscles and nerves, promoting deeper sleep cycles and reducing morning hunger urges.", "Set a consistent bedtime—why? It synchronizes your circadian rhythm, optimizing ghrelin suppression for calm, hunger-free mornings.", "Practice gratitude journaling at night—why? It calms the mind, enhancing REM sleep and supporting emotional balance to curb nocturnal cravings.", "Limit caffeine after noon—why? It prevents interference with adenosine, allowing natural sleep pressure to build for restorative rest.", "Use aromatherapy like lavender—why? It promotes relaxation, improving sleep onset and quality to balance hunger hormones effectively.", "Keep your bedroom for sleep only—why? It conditions your brain for rest, enhancing efficiency and reducing food-focused thoughts from poor sleep.", "Incorporate evening stretches—why? They release tension, improving circulation and preparing your body for hormone-balancing sleep.", "Avoid heavy meals before bed—why? Light digestion prevents disruptions, allowing deeper sleep and stable ghrelin levels overnight.", "Listen to calming sounds—why? They mask noise, enhancing sleep continuity and supporting leptin production for satiety.", "Maintain a sleep diary—why? It reveals patterns like stress affecting quality, allowing gentle adjustments for effortless hormone balance.", "Expose to morning light—why? It resets your circadian rhythm, improving nighttime melatonin for deeper, craving-reducing sleep.", "Practice progressive muscle relaxation—why? It reduces physical tension, promoting faster sleep onset and better hormone regulation.", "Limit alcohol before bed—why? It prevents REM disruption, ensuring quality rest that balances appetite hormones effectively.", "Create a worry dump ritual—why? Clearing your mind reduces rumination, enhancing sleep depth and reducing stress-related hunger.", "Use weighted blankets—why? They promote security, improving sleep quality and stabilizing ghrelin for fewer cravings.", "Incorporate chamomile tea—why? It calms the nervous system, enhancing GABA for relaxed, restorative sleep cycles.", "Set a wind-down alarm—why? It cues your body for rest, improving consistency and hormone balance effortlessly.", "Practice 4-7-8 breathing—why? It activates parasympathetic response, reducing cortisol for deeper, hunger-stabilizing sleep.", "Keep consistent wake times—why? It anchors your rhythm, optimizing ghrelin suppression for energized, noise-free days.", "Meditate before bed—why? It quiets the mind, enhancing delta waves for profound recovery and balanced appetite.", "Use white noise machines—why? They block disturbances, improving sleep continuity and leptin sensitivity.", "Avoid naps after 3 PM—why? It preserves sleep pressure, ensuring deep nighttime rest for hormone harmony.", "Incorporate valerian root tea—why? It promotes relaxation, improving sleep onset without disrupting natural cycles.", "Create a sleep sanctuary—why? A dedicated space enhances association, improving quality and reducing food noise from fatigue.", "Practice body scans—why? They release stored tension, promoting faster sleep and balanced ghrelin levels.", "Limit blue light exposure—why? It preserves melatonin, enhancing sleep depth for craving control.", "Use essential oils like lavender—why? Aromatherapy calms, improving REM for emotional balance and reduced hunger.", "Keep a consistent routine—why? It trains your body clock, optimizing hormone release for effortless mornings.", "Avoid stimulants in evening—why? They prevent adenosine buildup, but abstinence ensures natural sleep pressure.", "Practice yoga nidra—why? It induces deep relaxation, enhancing delta sleep for profound hormone recovery.", "Use blackout curtains—why? They eliminate light pollution, boosting melatonin for quality rest and appetite stability.", "Incorporate tart cherry juice—why? Natural melatonin source enhances sleep duration without disrupting cycles.", "Set temperature to 65°F—why? Cool environments optimize sleep stages, balancing ghrelin for reduced cravings.", "Practice gratitude before bed—why? Positive focus reduces worry, enhancing sleep onset and quality.", "Use silk pillowcases—why? They reduce friction, improving comfort for uninterrupted, restorative sleep.", "Avoid heavy exercise late—why? It prevents adrenaline interference, ensuring calm transition to rest.", "Incorporate passionflower tea—why? It calms GABA receptors, promoting relaxed, deep sleep cycles.", "Keep pets out if disruptive—why? Uninterrupted sleep enhances quality for better hormone balance.", "Use a sleep mask—why? It blocks light, boosting melatonin for deeper, craving-reducing rest.", "Practice legs-up-the-wall pose—why? It relaxes the nervous system, improving circulation for better sleep.", "Avoid large meals before bed—why? It prevents digestive disruption, ensuring quality rest and stable ghrelin.", "Incorporate hops tea—why? Mild sedative effects enhance relaxation for effortless sleep onset.", "Set a digital curfew—why? Reducing screen time preserves natural rhythms for hormone harmony.", "Use a humidifier—why? Optimal moisture prevents dry throat disruptions, enhancing sleep continuity.", "Practice alternate nostril breathing—why? It balances hemispheres, promoting calm for deep rest.", "Avoid arguments before bed—why? Emotional calm enhances sleep quality for better appetite control.", "Incorporate lemon balm—why? It reduces anxiety, improving sleep depth and hormone recovery.", "Keep your room tidy—why? Clutter-free spaces reduce mental noise for effortless wind-down.", "Use progressive relaxation audio—why? Guided calm enhances delta waves for profound restoration.", "Avoid caffeine 8 hours before bed—why? It blocks adenosine, but abstinence ensures natural sleep buildup.", "Incorporate ashwagandha—why? Adaptogen reduces cortisol, promoting relaxed, quality sleep.", "Set intentions for tomorrow—why? Mental closure reduces rumination for uninterrupted rest.", "Use a sunrise alarm clock—why? Gentle wake light aligns rhythms for energized, balanced days.", "Practice loving-kindness meditation—why? It fosters peace, enhancing emotional recovery during sleep.", "Keep hydration by bedside—why? Night sips prevent dehydration disruptions to sleep quality.", "Incorporate reishi mushrooms—why? They calm the mind, improving sleep depth naturally.", "Avoid blue-blocking glasses late—why? They preserve melatonin for effortless hormone balance.", "Practice corpse pose—why? Total relaxation prepares body for deep, restorative cycles.", "Use a sleep journal—why? Tracking insights reveal patterns for gentle, effective adjustments.", "Incorporate 5-HTP supplements if needed—why? Precursor to serotonin enhances melatonin for quality rest.", "Avoid intense TV before bed—why? Calm content preserves relaxation for better sleep onset.", "Practice autogenic training—why? Self-hypnosis relaxes, improving sleep efficiency effortlessly.", "Use a body pillow—why? Comfort support reduces tossing for continuous, deep rest.", "Incorporate holy basil—why? Adaptogen lowers stress for calm, hormone-balancing sleep.", "Set a gratitude alarm—why? Evening reflection calms the mind for peaceful transitions.", "Avoid sugar late—why? It prevents spikes disrupting natural sleep hormone release.", "Practice biofeedback—why? It trains relaxation responses for improved sleep quality.", "Use aromatherapy diffusers—why? Scents like lavender enhance GABA for relaxed rest.", "Incorporate skullcap herb—why? Mild sedative promotes calm without disrupting cycles.", "Avoid heated arguments—why? Emotional peace enhances sleep depth and hormone balance.", "Practice guided imagery—why? Visualization calms, improving REM for emotional recovery.", "Use cooling pillows—why? Temperature regulation optimizes stages for better hunger control.", "Incorporate L-theanine—why? It promotes alpha waves for relaxed, quality sleep.", "Avoid heavy blankets if hot—why? Comfort temperature enhances continuity for hormone harmony.", "Practice self-massage—why? It releases tension, preparing for deep, restorative sleep.", "Use sleep stories—why? Narrative calm distracts from noise, enhancing onset.", "Incorporate California poppy—why? Natural mild sedative supports calm sleep cycles.", "Avoid late workouts—why? Adrenaline calms for better transition to rest.", "Practice EFT tapping—why? It reduces anxiety, improving sleep quality effortlessly.", "Use a sunrise simulator—why? Gentle light aligns rhythms for energized wake-ups.", "Incorporate jujube fruit—why? It calms nerves, promoting deep, balanced sleep.", "Avoid bright bathrooms—why? Dim lighting preserves melatonin for quality rest.", "Practice somatic experiencing—why? It releases stored stress for uninterrupted sleep.", "Use a sleep app for tracking—why? Gentle data reveals patterns without pressure.", "Incorporate hops extract—why? Mild sedative enhances relaxation for effortless sleep.", "Avoid late caffeine—why? It blocks adenosine, but abstinence builds natural pressure.", "Practice TRE exercises—why? Tension release promotes calm for deep recovery.", "Use a grounding mat—why? It may lower cortisol for better hormone balance.", "Incorporate magnolia bark—why? It reduces anxiety, improving sleep depth naturally.", "Embrace sleep as renewal—why? It restores your body's wisdom, balancing hunger hormones for joyful, effortless days."] },
  { id: 'stress', label: 'Stress Relief', icon: CloudSun, color: 'text-foreground', bgColor: 'bg-green-400', borderColor: 'border-green-600', requiredTier: 'basic', quotes: ["Embrace deep breathing to calm your mind—why? It lowers cortisol surges, reducing emotional eating triggers and fostering resilience without effort.", "Practice mindfulness in moments of tension—why? It rewires responses for natural calm, quieting food noise and promoting joyful balance.", "Take a short walk to release stress—why? Movement buffers cortisol, enhancing mood and preventing stress-induced cravings effortlessly.", "Use progressive relaxation techniques—why? They ease muscle tension, lowering the cortisol that amplifies hunger signals and binges.", "Incorporate journaling for reflection—why? It processes emotions, reducing cortisol buildup and fostering mindful responses to urges.", "Try guided meditation daily—why? It activates the parasympathetic system, calming the HPA axis to minimize emotional hunger.", "Practice gratitude to shift perspective—why? It reduces anxiety, lowering cortisol and preventing the cycle of stress-eating.", "Engage in hobbies for joy—why? They distract from tension, balancing cortisol for reduced cravings and effortless calm.", "Use aromatherapy like lavender—why? It promotes relaxation, lowering cortisol to quiet the mental pull toward comfort foods.", "Breathe in 4-7-8 rhythm—why? It signals safety to the body, reducing cortisol amplification of ghrelin and hunger.", "Connect with loved ones—why? Social bonds release oxytocin, countering cortisol and reducing isolation-driven binges.", "Practice yoga for release—why? Gentle poses lower cortisol, enhancing emotional resilience against craving triggers.", "Listen to calming music—why? It soothes the nervous system, reducing stress that disrupts hunger hormone balance.", "Take nature breaks—why? Green spaces lower cortisol, fostering calm and reducing emotional eating urges.", "Use positive affirmations—why? They reframe thoughts, lowering cortisol for clearer, less noise-filled hunger signals.", "Engage in creative outlets—why? They channel energy, reducing tension that leads to binge cycles.", "Practice EFT tapping—why? It reduces emotional blocks, lowering cortisol for balanced responses to cravings.", "Set boundaries mindfully—why? It prevents overload, reducing cortisol spikes that amplify food noise.", "Use visualization techniques—why? Imagining calm lowers cortisol, fostering resilience against stress-eating.", "Incorporate laughter therapy—why? It boosts endorphins, countering cortisol for reduced emotional hunger.", "Practice self-compassion—why? It reduces self-judgment, lowering cortisol and preventing shame-driven binges.", "Engage in pet therapy—why? Animal bonds release oxytocin, calming cortisol for balanced hunger control.", "Use color therapy—why? Soothing hues reduce tension, lowering cortisol amplification of cravings.", "Practice grounding exercises—why? They connect you to the present, reducing cortisol-driven food urges.", "Incorporate herbal teas—why? Calming herbs lower cortisol, supporting emotional balance without effort.", "Set digital detox times—why? Reducing screen stress lowers cortisol, quieting mental food chatter.", "Practice loving-kindness meditation—why? It fosters empathy, reducing cortisol and emotional eating triggers.", "Engage in art therapy—why? Creative expression releases tension, lowering cortisol for clearer signals.", "Use progressive muscle relaxation—why? It systematically calms the body, reducing cortisol impacts on hunger.", "Incorporate forest bathing—why? Nature immersion lowers cortisol, fostering calm and reduced binges.", "Practice autogenic training—why? Self-suggestion relaxes, lowering cortisol for balanced responses.", "Engage in volunteer work—why? Helping others boosts oxytocin, countering cortisol and food noise.", "Use biofeedback apps—why? They train calm responses, reducing cortisol-driven craving cycles.", "Practice somatic experiencing—why? It releases stored trauma, lowering chronic cortisol levels.", "Incorporate humor daily—why? Laughter reduces cortisol, lightening emotional hunger burdens.", "Set realistic expectations—why? It prevents overwhelm, lowering cortisol amplification of urges.", "Practice qigong—why? Energy flows calm the system, reducing cortisol and binge triggers.", "Engage in music therapy—why? Melodies soothe, lowering cortisol for emotional eating prevention.", "Use aromatherapy diffusers—why? Scents like chamomile reduce tension, calming hunger signals.", "Practice tai chi—why? Slow movements balance energy, lowering cortisol effortlessly.", "Incorporate pet cuddles—why? Touch releases oxytocin, countering cortisol spikes.", "Set a worry time—why? Scheduled reflection reduces rumination, lowering cortisol impacts.", "Practice reiki—why? Energy healing calms, reducing stress-driven food urges.", "Engage in reading—why? Immersive stories distract, lowering cortisol levels naturally.", "Use acupressure points—why? They release tension, calming cortisol for hunger balance.", "Incorporate sound baths—why? Vibrations soothe, reducing cortisol and emotional eating.", "Practice forgiveness exercises—why? Releasing grudges lowers cortisol, fostering calm.", "Engage in crafting—why? Focused creation reduces tension, quieting craving signals.", "Use hypnotherapy audio—why? Suggestion calms subconscious, lowering cortisol effects.", "Incorporate float tanks—why? Sensory deprivation reduces cortisol dramatically.", "Practice self-massage—why? It releases knots, lowering physical stress cues.", "Engage in puzzles—why? Mental focus distracts, reducing cortisol amplification.", "Use essential oils—why? Topical application calms, lowering emotional hunger.", "Incorporate sauna sessions—why? Heat relaxes, reducing cortisol buildup.", "Practice shadow work—why? Addressing inner conflicts lowers chronic stress.", "Engage in volunteering—why? Purpose reduces tension, balancing emotional eating.", "Use binaural beats—why? Audio calms brainwaves, lowering cortisol levels.", "Incorporate cold showers—why? They build resilience, reducing stress responses.", "Practice affirmations—why? Positive self-talk lowers cortisol over time.", "Engage in community groups—why? Support networks reduce isolation stress.", "Use herbal supplements—why? Adaptogens like ashwagandha lower cortisol naturally.", "Incorporate nature journaling—why? Reflection in green spaces calms the mind.", "Practice EMDR techniques—why? It processes trauma, reducing cortisol triggers.", "Engage in dance therapy—why? Movement expresses, lowering emotional tension.", "Use crystal healing—why? Placebo calm reduces perceived stress levels.", "Incorporate breathwork classes—why? Structured breathing lowers cortisol effectively.", "Practice minimalism—why? Decluttering reduces environmental stress cues.", "Engage in laughter yoga—why? Forced joy releases endorphins, countering cortisol.", "Use flower essences—why? Gentle remedies calm emotional states.", "Incorporate forest therapy—why? Phytoncides from trees lower cortisol naturally.", "Practice neurofeedback—why? It trains brainwaves for reduced stress responses.", "Engage in equine therapy—why? Animal interaction calms, lowering cortisol.", "Use VR relaxation—why? Immersive calm reduces real-world tension.", "Incorporate acupuncture—why? It balances energy, lowering cortisol levels.", "Practice havening techniques—why? Self-soothing reduces trauma-induced stress.", "Engage in art journaling—why? Expressive release lowers emotional cortisol.", "Use light therapy—why? It regulates mood, reducing stress amplification.", "Incorporate shiatsu massage—why? Pressure points calm the nervous system.", "Practice ho'oponopono—why? Forgiveness ritual reduces internal conflict stress.", "Engage in sound healing—why? Vibrations soothe, lowering cortisol responses.", "Use reflexology—why? Foot mapping calms corresponding body areas.", "Incorporate craniosacral therapy—why? Gentle touch reduces tension buildup.", "Practice the Alexander technique—why? It improves posture, reducing physical stress.", "Engage in bibliotherapy—why? Reading heals, lowering emotional tension.", "Use chromotherapy—why? Colors influence mood, reducing cortisol.", "Incorporate ayurvedic practices—why? Balanced doshas reduce stress responses.", "Practice feldenkrais—why? Movement awareness lowers habitual tension.", "Engage in horticulture therapy—why? Plant care calms, reducing cortisol.", "Use homeopathy—why? Gentle remedies address emotional stress roots.", "Incorporate naturopathy—why? Natural approaches balance stress hormones.", "Practice osteopathy—why? Structural alignment reduces physical stress.", "Engage in pet therapy—why? Animal bonds lower cortisol effectively.", "Use hypnotherapy—why? Subconscious calm reduces stress patterns.", "Incorporate reiki—why? Energy flow balances, lowering tension.", "Practice somatic yoga—why? Body-focused calm reduces stored stress.", "Engage in music creation—why? Expressive outlets lower emotional cortisol.", "Use floatation tanks—why? Sensory reduction dramatically lowers cortisol.", "Incorporate bioenergetics—why? Energy exercises release tension buildup.", "Practice Rolfing—why? Structural integration reduces chronic stress.", "Engage in spiritual practices—why? Faith or meditation lowers cortisol through purpose."] },
  { id: 'hydration', label: 'Hydration', icon: Droplet, color: 'text-foreground', bgColor: 'bg-blue-400', borderColor: 'border-blue-600', requiredTier: 'free', quotes: ["Stay hydrated to quiet false hunger signals—why? Proper water intake stabilizes blood sugar, preventing deceptive cravings and fostering effortless energy balance.", "Sip water throughout the day—why? It supports nutrient transport, enhancing metabolism and reducing the mental noise of unnecessary food thoughts.", "Aim for your ideal intake—why? Dehydration confuses the brain's hunger center, but hydration clarifies true needs for sustainable satiety.", "Drink before meals—why? It dilutes stomach acids gently, promoting better digestion and curbing overeating without effort.", "Incorporate herbal infusions—why? They add flavor while hydrating, stabilizing ghrelin to minimize false urges and promote joy.", "Track your sips mindfully—why? Awareness reveals patterns, like afternoon dips mimicking hunger, allowing natural adjustments for balance.", "Combine with whole foods—why? Hydration enhances fiber's effects, slowing digestion for prolonged fullness and reduced noise.", "Set gentle reminders—why? Consistent intake prevents dehydration spikes, balancing hormones for effortless craving control.", "Opt for room temperature water—why? It absorbs better, supporting cellular health and quieting deceptive thirst-hunger confusion.", "Hydrate upon waking—why? It replenishes overnight losses, resetting ghrelin for a hunger-free start to your day.", "Infuse with lemon for zest—why? It adds vitamin C, boosting absorption and enhancing hydration's role in signal clarity.", "Monitor urine color—why? Pale yellow indicates balance, guiding intake to prevent false hunger from subtle dehydration.", "Pair with stress relief—why? Hydration calms cortisol effects, reducing emotional triggers that amplify food noise.", "Drink during activity—why? It maintains blood volume, preventing fatigue that masquerades as hunger urges.", "Choose mineral-rich water—why? Electrolytes support nerve function, clarifying true vs. false hunger signals effortlessly.", "Hydrate before bed—why? It prevents nighttime dehydration, enhancing sleep quality and morning hormone balance.", "Incorporate cucumber infusions—why? They add electrolytes, supporting cellular hydration for sustained energy without crashes.", "Set a daily goal—why? Personalized intake aligns with body needs, stabilizing signals for intuitive, noise-free eating.", "Drink slowly and mindfully—why? It allows absorption, preventing bloating while clarifying hunger cues gently.", "Combine with whole fruits—why? Natural electrolytes enhance hydration, balancing fluids for reduced false cravings.", "Monitor for dry mouth—why? It's a subtle signal of imbalance, guiding intake to prevent amplified food thoughts.", "Hydrate post-exercise—why? It replenishes losses, supporting recovery and preventing fatigue-driven hunger.", "Infuse with mint for refreshment—why? It soothes digestion, enhancing hydration's role in signal stability.", "Track intake consistently—why? Patterns reveal optimal timing, reducing dehydration's mimicry of true hunger.", "Choose filtered water—why? It removes impurities, supporting pure hydration for clear, balanced body signals.", "Hydrate during meals—why? It aids digestion, preventing discomfort that can trigger unnecessary eating urges.", "Incorporate electrolytes naturally—why? They enhance absorption, stabilizing fluids for effortless hormone balance.", "Set hydration breaks—why? Regular sips prevent dips, maintaining energy and quieting false hunger noise.", "Drink warm water in mornings—why? It kickstarts metabolism, balancing ghrelin for a calm, controlled day.", "Combine with sleep routines—why? Nighttime hydration supports recovery, reducing morning hunger imbalances.", "Infuse with berries for antioxidants—why? They enhance cellular health, supporting hydration's signal-clarifying effects.", "Monitor skin elasticity—why? It's a sign of balance, guiding intake to prevent subtle dehydration hunger.", "Hydrate pre-stress—why? It buffers cortisol effects, reducing emotional triggers for food noise.", "Choose spring water—why? Natural minerals support electrolyte balance for sustained, clear hunger cues.", "Track mood with intake—why? Hydration influences serotonin, reducing emotional hunger from dehydration.", "Hydrate during travel—why? It counters dry air effects, maintaining signal stability on the go.", "Infuse with ginger for warmth—why? It aids digestion, enhancing hydration's role in balanced energy.", "Set visual reminders—why? Consistent cues build habits, reducing forgotten intake that mimics hunger.", "Drink after caffeine—why? It counters diuretic effects, maintaining fluid balance for signal clarity.", "Combine with mindful breathing—why? It enhances absorption, supporting calm and reduced food focus.", "Monitor headaches—why? Often dehydration signs, guiding intake to prevent pain-triggered eating.", "Choose coconut water occasionally—why? Natural electrolytes support balance for active days without noise.", "Hydrate post-meal—why? It aids digestion, preventing fullness confusion with hunger signals.", "Track concentration levels—why? Hydration supports brain function, reducing fog that leads to snacking.", "Infuse with herbs—why? They add calming effects, supporting hydration's role in stress reduction.", "Set seasonal adjustments—why? Warmer weather increases needs, preventing summer dehydration hunger.", "Drink during work—why? It maintains focus, reducing stress-eating from mental fatigue.", "Choose alkaline water if preferred—why? It may support pH balance for optimal cellular function and signals.", "Monitor joint comfort—why? Hydration lubricates, preventing pain that can trigger comfort eating.", "Hydrate with meals mindfully—why? It enhances nutrient absorption, supporting balanced energy without crashes.", "Infuse with citrus—why? Vitamin C boosts immunity, complementing hydration's signal-stabilizing effects.", "Track energy dips—why? Often hydration-related, guiding intake for sustained vitality without noise.", "Drink before bed—why? It prevents overnight dehydration, supporting hormone balance during sleep.", "Choose reusable bottles—why? It encourages consistency, building habits for effortless signal clarity.", "Monitor mood swings—why? Dehydration can mimic emotional hunger, guiding adjustments for balance.", "Hydrate during illness—why? It supports recovery, preventing amplified hunger from weakness.", "Infuse with cucumber—why? It adds electrolytes, enhancing hydration for sustained energy.", "Set app reminders—why? Gentle cues build consistency without effort, reducing false hunger.", "Drink after salty meals—why? It balances electrolytes, preventing thirst-hunger confusion.", "Combine with whole foods—why? It enhances fiber's effects, promoting lasting fullness effortlessly.", "Monitor urine output—why? It's a balance indicator, guiding intake for optimal signal function.", "Choose infused sparkling water—why? It adds variety, maintaining interest in hydration habits.", "Hydrate post-activity—why? It replenishes losses, supporting recovery without hunger spikes.", "Track skin health—why? Hydration shows in glow, guiding intake for overall vitality.", "Drink mindfully—why? Awareness enhances absorption, clarifying true vs. false hunger signals.", "Infuse with mint—why? It soothes digestion, complementing hydration's balancing effects.", "Set hydration goals—why? Personalized targets align with body needs for effortless control.", "Monitor focus levels—why? Hydration supports brain function, reducing fatigue-driven eating.", "Drink during meetings—why? It maintains clarity, reducing stress-related hunger cues.", "Choose fruit-infused water—why? Natural flavors encourage intake without added noise.", "Track headaches—why? Often dehydration signs, guiding preventive intake for balance.", "Hydrate with electrolytes—why? They enhance absorption, supporting signal stability during activity.", "Monitor joint comfort—why? Hydration lubricates, preventing pain-triggered eating.", "Drink after caffeine—why? It counters diuretic effects, maintaining fluid balance.", "Infuse with herbs—why? They add calming benefits, supporting stress reduction alongside hydration.", "Set seasonal hydration—why? Adjust for weather to prevent imbalance mimicking hunger.", "Hydrate mindfully—why? It builds awareness, clarifying true needs without effort.", "Choose filtered options—why? Purity supports optimal cellular function for clear signals.", "Track mood with sips—why? Hydration influences serotonin, reducing emotional hunger.", "Drink during travel—why? It counters dry environments, maintaining balance on the go.", "Infuse with ginger—why? It aids digestion, enhancing hydration's effects.", "Monitor for fatigue—why? Dehydration often causes it, guiding intake for energy.", "Hydrate post-meal—why? It aids fullness, preventing rebound hunger signals.", "Choose mineral water—why? Natural electrolytes support balance effortlessly.", "Track concentration—why? Hydration boosts brain function, reducing foggy eating urges.", "Drink before stress—why? It buffers cortisol, reducing emotional triggers.", "Infuse with berries—why? Antioxidants enhance cellular health alongside hydration.", "Set visual cues—why? They encourage consistency for effortless habit building.", "Hydrate with meals—why? It enhances nutrient absorption for balanced signals.", "Monitor skin dryness—why? It's a sign, guiding preventive hydration.", "Choose sparkling infusions—why? Variety maintains interest in hydration habits.", "Track headaches—why? Often linked to low intake, guiding adjustments.", "Hydrate during work—why? It maintains focus, reducing stress-eating.", "Infuse with citrus—why? Vitamin C complements hydration's benefits.", "Set app goals—why? Gentle tracking builds habits without pressure.", "Monitor energy—why? Hydration directly influences it, guiding intake.", "Drink mindfully—why? It enhances awareness of body's needs.", "Choose herbal options—why? They add calm, supporting stress reduction.", "Track thirst cues—why? They reveal patterns for effortless adjustments.", "Hydrate for harmony—why? It balances the body's systems for hunger-free joy."] },
  { id: 'protocol', label: '75/20/20 Protocol', icon: UserCheck, color: 'text-foreground', bgColor: 'bg-teal-400', borderColor: 'border-teal-600', requiredTier: 'basic', quotes: ["Pause at 75% and sip 20 ounces—why? This allows your body's satiety signals to activate, reducing habitual overeating and fostering mindful fullness effortlessly.", "Eat 75%, hydrate, wait 20 minutes—why? The delay lets leptin rise, curbing false hunger and building the habit of intuitive portion control without struggle.", "Start with 75% of your meal—why? It trains slower eating, enhancing enzyme release for better digestion and sustained energy, quieting food noise naturally.", "After 75%, drink and pause—why? Water aids gastric distension, signaling fullness to the brain and preventing rebound cravings with gentle awareness.", "Log your post-wait hunger—why? This reflection reveals true needs, adjusting portions dynamically to avoid hunger while supporting natural balance.", "Embrace the 20-minute wait—why? It rewires your gut-brain axis, fostering habits that reduce binge risks through compassionate listening.", "75% eaten, then hydrate—why? This combo stabilizes blood sugar, preventing crashes that fuel emotional eating and promoting joyful meals.", "Reassess at 20 minutes—why? It honors your body's lag time, building slower eating for improved metabolism and effortless satiety.", "Note your feelings after the pause—why? This insight helps identify emotional cues, turning meals into growth opportunities without judgment.", "Start small with 75%—why? It prevents portion creep, retraining your brain for natural fullness and sustained habit harmony.", "Sip during the wait—why? Water complements digestion, enhancing nutrient absorption and reducing the pull of habitual finishing.", "Track % remaining eaten—why? This data reveals patterns, adjusting portions to match true hunger without any sense of deprivation.", "Pause to savor flavors—why? Slower eating activates taste satisfaction, reducing the need for larger portions over time.", "75/20/20 for every meal—why? Consistency builds neuroplasticity, making intuitive eating automatic and joyful.", "Reflect on hunger drop—why? It celebrates your body's wisdom, fostering self-trust in satiety signals without effort.", "Combine with pillar 1—why? Extra hydration amplifies fullness, preventing hunger while building effortless routines.", "Log emotional notes—why? This uncovers stress triggers, integrating pillar 3 for holistic craving control.", "Wait mindfully—why? The pause enhances GLP-1 release, naturally curbing appetite for sustainable balance.", "Adjust portions gently—why? It honors your signals, preventing regain through intuitive, compassionate eating.", "Celebrate lower % eaten—why? It shows growing satiety awareness, reducing overeating without any force.", "Use after indulgences—why? It prevents rebound, integrating tool synergy for guilt-free enjoyment.", "Track over weeks—why? Patterns reveal progress, building habits that quiet food noise effortlessly.", "Pause for digestion—why? It allows enzymes to work, reducing discomfort and binge risks naturally.", "Reassess with curiosity—why? This mindset fosters learning, turning meals into joyful explorations.", "Hydrate fully during wait—why? It supports leptin signaling, enhancing fullness without added calories.", "Note flavor satisfaction—why? It deepens appreciation, reducing the drive for quantity over quality.", "Combine with activity—why? Post-movement pause enhances recovery, stabilizing hunger signals.", "Log consistently—why? Data builds intuition, preventing portion creep through awareness.", "Pause in social settings—why? It fosters mindful sharing, reducing overeating from external cues.", "Celebrate hunger insights—why? Each pause teaches, building self-efficacy without judgment.", "Use for snacks too—why? It extends habit, reducing impulsive eating throughout the day.", "Reflect on energy after—why? It reveals satiety's role in vitality, fostering balanced choices.", "Integrate with stress relief—why? Calm pauses enhance emotional awareness during waits.", "Track mood changes—why? Pauses reveal connections, reducing stress-driven overeating.", "Celebrate reduced intake—why? It shows growing trust in your body's signals.", "Pause with gratitude—why? Positive focus enhances meal joy.", "Log physical sensations—why? It builds body awareness, preventing habitual finishing.", "Use in busy times—why? Quick pauses maintain mindfulness, reducing rushed binges.", "Combine with whole foods—why? Nutrient density amplifies satiety during waits.", "Celebrate consistency—why? Repeated pauses rewire for automatic fullness recognition.", "Reflect on cravings—why? Pauses reveal emotional vs. physical needs gently.", "Hydrate mindfully—why? It enhances the pause's digestive benefits naturally.", "Track over months—why? Long-term data prevents regain through sustained awareness.", "Use for desserts—why? It prevents sugar-driven overindulgence effortlessly.", "Celebrate flavor depth—why? Slower pace enhances satisfaction with less.", "Integrate with sleep—why? Evening pauses prevent heavy meals disrupting rest.", "Log energy levels—why? It reveals satiety's role in vitality post-pause.", "Pause with breath—why? It calms, enhancing emotional clarity during waits.", "Track portion trends—why? It shows intuitive adjustments over time.", "Celebrate mindful meals—why? Each pause builds harmony without effort.", "Use in social dining—why? It fosters presence, reducing overeating from conversation.", "Reflect on fullness cues—why? It deepens body trust, quieting food noise.", "Combine with hydration goal—why? Extra water amplifies satiety signals.", "Log emotional state—why? It uncovers non-hunger drivers gently.", "Celebrate reduced portions—why? It honors your evolving intuition.", "Pause for gratitude—why? Positive reflection enhances meal joy.", "Track digestion comfort—why? Pauses reveal improved enzyme flow.", "Use during travel—why? It maintains mindfulness on the go.", "Integrate with activity—why? Post-movement pauses optimize recovery.", "Celebrate awareness gains—why? Each log builds effortless habits.", "Reflect on flavor lingering—why? It enhances satisfaction with less quantity.", "Log physical fullness—why? It distinguishes stomach from mind hunger.", "Pause with curiosity—why? It turns eating into exploration without judgment.", "Track energy post-meal—why? It reveals satiety's sustaining power.", "Celebrate mindful adjustments—why? They foster freedom from noise.", "Use for breakfast—why? It sets a calm tone for the day's eating.", "Reflect on meal enjoyment—why? It deepens appreciation beyond quantity.", "Log hunger evolution—why? It shows protocol's gentle impact.", "Pause with breath awareness—why? It enhances emotional clarity.", "Celebrate portion intuition—why? It builds trust in your body.", "Integrate with indulgence—why? It prevents overdoing without guilt.", "Track over seasons—why? Adjustments maintain balance year-round.", "Use in group settings—why? It fosters social mindfulness.", "Reflect on satiety signals—why? It reveals your body's wisdom.", "Celebrate reduced creep—why? It sustains habits effortlessly.", "Log flavor satisfaction—why? It shifts focus from quantity to quality.", "Pause with positive intent—why? It enhances emotional well-being.", "Track digestion ease—why? It shows protocol's gentle benefits.", "Use during busy days—why? Quick pauses maintain awareness.", "Celebrate metabolic stability—why? It fosters energy without crashes.", "Reflect on cognitive clarity—why? Pauses reduce fog from overeating.", "Log long-term trends—why? It prevents regain through insight.", "Pause with gratitude practice—why? It deepens meal joy.", "Track hunger patterns—why? It reveals emotional influences gently.", "Celebrate intuitive freedom—why? It liberates from noise.", "Use for all meals—why? Consistency builds lasting habits.", "Reflect on energy flow—why? It connects satiety to vitality.", "Log mindful moments—why? It enhances overall well-being.", "Pause with body scan—why? It tunes into physical cues.", "Celebrate portion harmony—why? It aligns with your needs.", "Integrate with sleep—why? Evening pauses aid rest.", "Track flavor depth—why? It increases satisfaction naturally.", "Use during holidays—why? It maintains balance joyfully.", "Reflect on fullness types—why? It distinguishes emotional from physical.", "Celebrate protocol mastery—why? It fosters lifelong ease.", "Log digestive comfort—why? It reveals improved flow.", "Pause with curiosity—why? It turns learning into joy.", "Track metabolic shifts—why? It shows gentle progress.", "Use with family—why? It models mindful habits.", "Celebrate satiety wisdom—why? It empowers hunger-free living."] },
  { id: 'planner', label: 'Indulgence Planner', icon: Salad, color: 'text-foreground', bgColor: 'bg-lime-400', borderColor: 'border-lime-600', requiredTier: 'basic', quotes: ["Plan your indulgence with care—why? It allows joyful enjoyment without guilt, preparing your body for balance and preventing rebound cravings.", "Set a date and time for your treat—why? Intentional planning honors your desires, integrating pillar 1 hydration to stabilize signals beforehand.", "Prepare a post-indulgence protein meal—why? It restores balance, countering sugar spikes and supporting pillar 5 for sustained satiety.", "Log your pre-day hydration goal—why? Proper fluids dilute potential crashes, fostering mindful enjoyment without disruption.", "Reflect on your feel after—why? It reveals insights, turning indulgence into growth without judgment or regret.", "Incorporate pillar 3 relief before—why? Calming stress prevents emotional amplification, allowing true pleasure in the moment.", "Choose your indulgence mindfully—why? It aligns with your values, reducing noise and promoting joyful, balanced living.", "Plan follow-up checks—why? Mid-day and next-day logs track stability, preventing cycles and fostering awareness.", "Hydrate during your indulgence—why? It supports digestion, minimizing discomfort and maintaining hormone harmony.", "Celebrate without overdoing—why? Mindful portions enhance enjoyment, integrating 75/20/20 for intuitive control.", "Log your satisfaction level—why? It builds intuition, revealing what truly nourishes beyond fleeting pleasure.", "Prepare with whole foods—why? Nutrient-dense preps buffer impacts, aligning with pillar 5 for effortless recovery.", "Set emotional intentions—why? It fosters presence, reducing guilt and turning treats into joyful experiences.", "Incorporate movement after—why? Pillar 4 boosts endorphins, balancing any indulgence without force.", "Track hunger the next day—why? It offers insights, preventing rebound and supporting long-term harmony.", "Choose quality over quantity—why? Mindful selection enhances satisfaction, reducing the need for excess.", "Plan around your sleep—why? Pillar 2 rest stabilizes recovery, preventing indulgence disruptions to rhythms.", "Reflect on flavors enjoyed—why? It deepens appreciation, fostering intuitive choices without compulsion.", "Hydrate post-indulgence—why? It aids detoxification, supporting balance and gentle return to routine.", "Celebrate the experience—why? Positive framing reduces shame, turning moments into growth opportunities.", "Log mid-day extra hunger—why? It reveals patterns, allowing adjustments without judgment.", "Prepare with stress relief—why? Pillar 3 calms cortisol, preventing emotional overindulgence.", "Choose nourishing treats—why? Quality enhances joy, aligning with pillar 5 for balanced pleasure.", "Set a mindful environment—why? It fosters presence, reducing mindless consumption habits.", "Track overall feel—why? It builds self-awareness, preventing cycles of regret and binge.", "Incorporate hydration goals—why? It stabilizes blood sugar, supporting effortless enjoyment.", "Plan with loved ones—why? Shared joy enhances satisfaction, reducing quantity needs.", "Reflect on energy after—why? It reveals impacts, guiding future balance without restriction.", "Prepare post-meal activity—why? Pillar 4 movement aids digestion, preventing discomfort.", "Celebrate mindful choices—why? It reinforces positive habits, turning indulgence into harmony.", "Log satisfaction honestly—why? Truthful reflection fosters growth without self-criticism.", "Choose seasonal treats—why? Freshness enhances joy, aligning with natural balance.", "Plan around sleep times—why? Pillar 2 recovery prevents next-day disruptions.", "Reflect on emotional state—why? It uncovers triggers, integrating pillar 3 for calm.", "Hydrate throughout—why? It supports stability, enhancing pleasure without excess.", "Celebrate the ritual—why? Mindful preparation turns treats into cherished moments.", "Log next-day hunger—why? It reveals rebound patterns for gentle adjustments.", "Prepare with whole ingredients—why? It minimizes additives, supporting pillar 5 balance.", "Set portion intentions—why? It fosters awareness, preventing unconscious overdoing.", "Reflect on joy levels—why? It deepens appreciation, reducing frequency needs.", "Incorporate 75/20/20—why? It prevents dessert overindulgence with mindful pauses.", "Plan with hydration focus—why? It buffers impacts, supporting effortless recovery.", "Celebrate shared indulgences—why? Connection enhances satisfaction beyond food.", "Log mid-day cravings—why? It tracks stability, guiding future planning.", "Choose meaningful treats—why? Emotional value reduces quantity for true joy.", "Prepare with stress check—why? Calm ensures presence during enjoyment.", "Reflect on physical feel—why? It reveals true satisfaction cues gently.", "Plan around activity—why? Pillar 4 enhances digestion post-indulgence.", "Celebrate balance achieved—why? It reinforces positive, guilt-free experiences.", "Log overall well-being—why? It connects indulgence to holistic harmony.", "Choose treats with nutrients—why? It supports recovery, aligning with pillar 5.", "Plan with sleep in mind—why? Rest aids processing without disruption.", "Reflect on flavor depth—why? It enhances enjoyment with less quantity.", "Hydrate during planning—why? It sets a balanced foundation effortlessly.", "Celebrate mindful preparation—why? It turns indulgence into intentional joy.", "Log emotional satisfaction—why? It reveals true fulfillment beyond food.", "Prepare with whole additions—why? It minimizes processed elements gently.", "Plan for shared moments—why? Connection amplifies pleasure without excess.", "Reflect on energy stability—why? It guides future balance without effort.", "Celebrate the afterglow—why? Positive closure reinforces harmony.", "Log follow-up feel—why? It builds awareness for growth.", "Choose occasional treats—why? Rarity enhances appreciation and balance.", "Plan with hydration ritual—why? It supports effortless enjoyment.", "Reflect on portion joy—why? It fosters satisfaction with less.", "Prepare mindfully—why? Intention sets positive tone without guilt.", "Celebrate integrated balance—why? It honors your journey's harmony.", "Log mid-day balance—why? It reveals sustained stability.", "Choose treats with care—why? Quality over quantity fosters joy.", "Plan around well-being—why? It ensures positive outcomes gently.", "Reflect on true pleasure—why? It deepens meaningful experiences.", "Hydrate post-plan—why? It aids gentle recovery.", "Celebrate mindful moments—why? They build lasting harmony.", "Log overall impact—why? It guides future choices effortlessly.", "Choose with intention—why? It aligns with your values.", "Plan for joy—why? It enhances life without disruption.", "Reflect on emotional calm—why? It reveals balanced responses.", "Prepare with presence—why? It fosters true enjoyment.", "Celebrate the experience—why? It reinforces positive habits.", "Log satisfaction depth—why? It builds self-awareness.", "Choose nourishing options—why? It supports gentle integration.", "Plan with flexibility—why? It allows effortless adjustments.", "Reflect on energy flow—why? It connects to holistic well-being.", "Hydrate intentionally—why? It enhances balance naturally.", "Celebrate mindful indulgence—why? It turns pleasure into growth.", "Log follow-up harmony—why? It reveals sustained joy.", "Choose with compassion—why? It honors your needs gently.", "Plan for presence—why? It deepens the moment's joy.", "Reflect on true fulfillment—why? It fosters lasting satisfaction.", "Prepare with care—why? It ensures positive experiences.", "Celebrate balanced joy—why? It reinforces harmony without effort.", "Log emotional insights—why? It builds deeper understanding.", "Choose intentionally—why? It aligns pleasure with wellness.", "Plan with mindfulness—why? It enhances awareness gently.", "Reflect on portion joy—why? It reveals true needs.", "Hydrate for harmony—why? It supports effortless balance.", "Celebrate the ritual—why? It turns moments into memories.", "Log overall calm—why? It guides future harmony.", "Choose with presence—why? It deepens authentic joy.", "Plan for fulfillment—why? It ensures meaningful experiences.", "Reflect on balanced pleasure—why? It fosters lifelong joy."] },
  { id: 'cravings', label: 'Cravings/Binges', icon: Apple, color: 'text-foreground', bgColor: 'bg-red-400', borderColor: 'border-red-600', requiredTier: 'basic', quotes: ["Recognize cravings as body signals, not failures—why? They often stem from dehydration; hydrate first to clarify true needs and reduce false urges effortlessly.", "When a binge occurs, pause with compassion—why? It's a chance to explore sleep deficits raising ghrelin; prioritize rest to balance hormones gently.", "Address cravings with stress relief—why? Cortisol amplifies urges, but deep breathing calms the response, fostering resilience without struggle.", "Turn to joyful movement during cravings—why? Exercise suppresses ghrelin temporarily, redirecting energy for natural calm and reduced binges.", "Choose whole foods over processed—why? UPF spikes dopamine like addiction, but natural options stabilize signals for effortless control.", "Log your binge insights—why? Reflection reveals patterns like sugar crashes; learn to prevent without judgment for growth.", "Hydrate to dilute cravings—why? Thirst often mimics hunger; water clarifies, reducing false signals and binge risks naturally.", "Prioritize sleep to curb binges—why? Poor rest elevates ghrelin; quality slumber balances hormones for quieter food noise.", "Practice relief for emotional cravings—why? Stress triggers cortisol surges; gentle techniques rewire for calm without overeating.", "Move joyfully against urges—why? Activity releases endorphins, buffering dopamine pulls from sugar for balanced responses.", "Avoid UPF to break cycles—why? Additives create addiction-like loops; whole foods restore natural satiety effortlessly.", "Use 75/20/20 for binge prevention—why? The pause reveals true fullness, reducing habitual overeating without force.", "Plan indulgences mindfully—why? Preparation prevents rebound binges; enjoy with balance for guilt-free joy.", "Guess calories to build awareness—why? It trains intuition against UPF tricks, reducing impulsive cravings.", "Hydrate during stress—why? It counters cortisol's hunger amplification, calming urges naturally.", "Sleep consistently to manage ghrelin—why? Irregular rest spikes the hormone; routines quiet noise effortlessly.", "Relieve stress with breath—why? It lowers emotional eating triggers, fostering calm without binge cycles.", "Exercise to suppress appetite—why? It reduces ghrelin, redirecting energy from food to joy.", "Choose protein over sugar—why? It stabilizes blood sugar, preventing crashes that fuel binges.", "Log cravings compassionately—why? Awareness reveals patterns, turning signals into growth opportunities.", "Hydrate before indulging—why? It buffers sugar spikes, preventing rebound urges effortlessly.", "Rest to reset hormones—why? Sleep debt raises ghrelin; quality rest restores balance naturally.", "Breathe through tension—why? Relief calms cortisol, reducing emotional binge triggers gently.", "Move to release endorphins—why? It counters dopamine from UPF, fostering natural satisfaction.", "Avoid processed triggers—why? Sugar creates loops; whole foods break cycles without struggle.", "Pause with 75/20/20—why? It reveals true satiety, preventing dessert-driven binges.", "Plan treats ahead—why? Intention reduces guilt, turning pleasure into balanced joy.", "Guess to build intuition—why? It uncovers UPF deceptions, reducing impulsive urges.", "Hydrate for signal clarity—why? It distinguishes thirst from true hunger, curbing false binges.", "Sleep for hormone harmony—why? It balances ghrelin-leptin, reducing nighttime craving risks.", "Relieve to reclaim calm—why? Stress amplifies urges; techniques foster peace effortlessly.", "Exercise for appetite control—why? It suppresses ghrelin, redirecting to natural energy.", "Choose whole over processed—why? UPF fuels addiction; naturals restore balance gently.", "Log with kindness—why? Reflection without judgment turns binges into learning moments.", "Hydrate post-binge—why? It aids recovery, preventing cycle continuation naturally.", "Rest after emotional days—why? Sleep heals stress wounds, balancing hunger hormones.", "Breathe to break the urge—why? Relief interrupts cortisol, calming binge impulses.", "Move to shift the energy—why? Activity redirects dopamine, reducing craving intensity.", "Avoid sugar's false high—why? It spikes then crashes; whole foods provide steady joy.", "Pause to assess true need—why? 75/20/20 reveals satiety, preventing overindulgence.", "Plan with presence—why? Mindful indulgence reduces regret and repeat binges.", "Guess to gain awareness—why? It demystifies portions, curbing habitual overeating.", "Hydrate for emotional calm—why? It buffers stress, reducing binge vulnerabilities.", "Sleep to strengthen resolve—why? Rest enhances prefrontal control over impulses.", "Relieve with gentle touch—why? Self-soothing calms, preventing emotional escalations.", "Exercise for endorphin joy—why? Natural highs replace food rewards effortlessly.", "Choose naturals for stability—why? They balance without UPF's addictive pulls.", "Log to learn patterns—why? Awareness empowers, turning cravings into insights.", "Hydrate during tension—why? It clears confusion, reducing stress-amplified urges.", "Rest for recovery—why? Sleep resets, preventing fatigue-driven binges.", "Breathe for balance—why? Relief restores calm, curbing emotional overeating.", "Move for mood lift—why? Activity elevates, reducing craving vulnerabilities.", "Avoid processed traps—why? They create cycles; naturals free you gently.", "Pause for presence—why? It reveals true desires beyond urges.", "Plan with compassion—why? It honors joys without binge aftermath.", "Guess for growth—why? It builds awareness, reducing impulsive responses.", "Hydrate to harmonize—why? It stabilizes, preventing false binge signals.", "Sleep to soothe—why? Rest calms the system, reducing nocturnal urges.", "Relieve to release—why? It frees stored tension triggering binges.", "Exercise to empower—why? Movement builds strength against cravings.", "Choose whole for wholeness—why? Naturals nurture without processed pitfalls.", "Log with love—why? Gentle reflection turns episodes into empowerment.", "Hydrate for healing—why? It restores balance post-binge gently.", "Rest for restoration—why? Sleep heals, preventing repeat patterns.", "Breathe for breakthrough—why? Relief interrupts cycles effortlessly.", "Move for momentum—why? It shifts energy from urges.", "Avoid additives' allure—why? They trap; naturals liberate naturally.", "Pause for peace—why? It calms the storm of cravings.", "Plan for pleasure—why? Mindful treats prevent binge regrets.", "Guess for guidance—why? It illuminates hidden patterns gently.", "Hydrate for hope—why? It clears paths to balance.", "Sleep for serenity—why? Rest renews control naturally.", "Relieve for relief—why? It eases burdens triggering overeating.", "Exercise for exhilaration—why? Joy supplants craving pulls.", "Choose clean for clarity—why? Whole foods dispel processed fog.", "Log for liberation—why? Awareness frees from cycles.", "Hydrate for harmony—why? It aligns body and mind gently.", "Rest for rebirth—why? Sleep resets urge patterns.", "Breathe for boundless calm—why? It expands beyond binge confines.", "Move for magical momentum—why? It propels positive change.", "Avoid artificial anchors—why? They weigh down; naturals lift.", "Pause for possibility—why? It opens doors to intuition.", "Plan for peace—why? Preparation ensures joyful balance.", "Guess for graceful guidance—why? It leads with gentle wisdom.", "Hydrate for harmonious health—why? It balances body beautifully.", "Celebrate every insight—why? Each reveals paths to freedom."] },
  { id: 'insights', label: 'Insights', icon: Lightbulb, color: 'text-foreground', bgColor: 'bg-yellow-400', borderColor: 'border-yellow-600', requiredTier: 'basic' },
  { id: 'measurements', label: 'Measurements', icon: Scale, color: 'text-foreground', bgColor: 'bg-gray-400', borderColor: 'border-gray-600', requiredTier: 'free' },
];

const topRowButtons = pillarsAndTools.slice(0, 5);
const bottomRowButtons = pillarsAndTools.slice(5, 10);

const upgradeTiers = {
    basic: { name: "Basic", reason: "Personalizes pillar guidance for effortless progress." },
    premium: { name: "Premium", reason: "Community builds pillar synergy for motivation!" },
    coaching: { name: "Coaching", reason: "Direct coaching accelerates your journey to freedom." }
}

export function DashboardClient() {
  const { onOpenChallenges } = useDashboardActions();
  const { user, userProfile } = useAuth();
  const { toast } = useToast();
  const [dataEntryDialogOpen, setDataEntryDialogOpen] = useState(false);
  const [insightsDialogOpen, setInsightsDialogOpen] = useState(false);
  const [activePillar, setActivePillar] = useState<(typeof pillarsAndTools[0]) | null>(null);
  
  const [latestChallenge, setLatestChallenge] = useState<Challenge | null>(null);
  const [isLoadingChallenge, setIsLoadingChallenge] = useState(true);
  const [upcomingIndulgences, setUpcomingIndulgences] = useState<any[]>([]);
  const [isLoadingIndulgences, setIsLoadingIndulgences] = useState(true);
  
  const [isCalendarOpen, setIsCalendarOpen] = useState(false);
  const [initialCalendarDate, setInitialCalendarDate] = useState<Date | undefined>(undefined);
  const [isResettingStreak, setIsResettingStreak] = useState(false);
  const [isResetStreakAlertOpen, setIsResetStreakAlertOpen] = useState(false);
  
  const [liveBingeFreeSince, setLiveBingeFreeSince] = useState<number | string | null>(null);
  
  const [educationalModalContent, setEducationalModalContent] = useState<EducationalContent | null>(null);
  const [isEducationalModalOpen, setIsEducationalModalOpen] = useState(false);
  const [isMounted, setIsMounted] = useState(false);

  const { onOpenCalendar } = useDashboardActions();
  
  useEffect(() => {
    setIsMounted(true);
  }, []);

  const hasSeenFeature = useCallback((featureId: string) => {
    if (typeof window === 'undefined') return false;
    return localStorage.getItem(`hasSeen_${featureId}`) === 'true';
  }, []);

  const markFeatureAsSeen = useCallback((featureId: string) => {
    if (typeof window === 'undefined') return;
    localStorage.setItem(`hasSeen_${featureId}`, 'true');
  }, []);


  const executePillarAction = (pillar: typeof pillarsAndTools[0]) => {
    if (pillar.id === 'insights') {
      setInsightsDialogOpen(true);
    } else {
      setActivePillar(pillar);
      setDataEntryDialogOpen(true);
    }
  }


  const handlePillarClick = (pillar: typeof pillarsAndTools[0]) => {
    if (!userProfile || !isMounted) return;

    const content = educationalContentLibrary[pillar.id];
    const hasSeen = hasSeenFeature(pillar.id);

    if (content && !hasSeen) {
        setEducationalModalContent(content);
        setIsEducationalModalOpen(true);
    } else {
        executePillarAction(pillar);
    }
  };

  const handleEducationalModalConfirm = () => {
    if (!educationalModalContent) return;

    markFeatureAsSeen(educationalModalContent.id);
    setIsEducationalModalOpen(false);

    const pillar = pillarsAndTools.find(p => p.id === educationalModalContent.id);
    if (!pillar) return;

    setTimeout(() => {
        executePillarAction(pillar);
    }, 150);
  };
  
  const handleEducationalModalClose = () => {
      if (educationalModalContent) {
          markFeatureAsSeen(educationalModalContent.id);
      }
      setIsEducationalModalOpen(false);
  }


  const fetchDashboardData = useCallback(async () => {
    if (!user) return;

    setIsLoadingChallenge(true);
    setIsLoadingIndulgences(true);

    getLatestChallengeForClient().then(result => {
      if (result.success && result.data) setLatestChallenge(result.data as Challenge);
      setIsLoadingChallenge(false);
    });

    getUpcomingIndulgences(user.uid).then(result => {
      if (result.success && result.data) setUpcomingIndulgences(result.data);
      setIsLoadingIndulgences(false);
    });
  }, [user]);

  useEffect(() => {
    if (user) {
      fetchDashboardData();
    }
  }, [user, fetchDashboardData]);

  useEffect(() => {
    if (user?.uid) {
      const docRef = doc(db, 'clients', user.uid);
      const unsubscribe = onSnapshot(docRef, (docSnap) => {
        if (docSnap.exists()) {
          const data = docSnap.data();
          if (data.bingeFreeSince) {
            setLiveBingeFreeSince(data.bingeFreeSince.toMillis());
          }
        }
      });
      return () => unsubscribe();
    }
  }, [user?.uid]);


  const handleOpenCalendarForIndulgence = (date: string) => {
    setInitialCalendarDate(new Date(date));
    setIsCalendarOpen(true);
  };

  useEffect(() => {
    if (onOpenCalendar) {
        (onOpenCalendar as any)._open = () => {
            setInitialCalendarDate(new Date());
            setIsCalendarOpen(true);
        }
    }
  }, [onOpenCalendar]);

  const handleDataEntryDialogClose = (wasSaved: boolean) => {
    setDataEntryDialogOpen(false);
    setActivePillar(null);
  }

  const handleResetStreak = async () => {
    if (!user) return;
    setIsResettingStreak(true);
    try {
        const result = await resetBingeStreakAction(user.uid);
        if (result.success) {
            toast({ title: 'Streak Reset', description: 'Your binge-free streak has been reset to 0 days.' });
        } else {
            throw new Error(result.error || 'Failed to reset streak.');
        }
    } catch (error: any) {
        toast({ variant: 'destructive', title: 'Error', description: error.message });
    } finally {
        setIsResettingStreak(false);
        setIsResetStreakAlertOpen(false);
    }
  };

  const bingeFreeDays = useMemo(() => {
    const bingeDateSource = liveBingeFreeSince || userProfile?.bingeFreeSince;
    if (!bingeDateSource) {
      return 0;
    }
    const lastBingeDate = new Date(bingeDateSource as number);
    return differenceInCalendarDays(new Date(), lastBingeDate);
  }, [userProfile?.bingeFreeSince, liveBingeFreeSince]);
  
    const getDayOfYear = () => {
      const now = new Date();
      const start = new Date(now.getFullYear(), 0, 0);
      const diff = now.getTime() - start.getTime();
      const oneDay = 1000 * 60 * 60 * 24;
      return Math.floor(diff / oneDay);
    };

    const dayOfYear = getDayOfYear();
    const quoteIndex = dayOfYear % quotes.length;
    const quoteOfTheDay = quotes[quoteIndex];


  const renderPillarButton = (pillar: typeof pillarsAndTools[0]) => {
    const Icon = pillar.icon;
    const currentTierIndex = userProfile ? TIER_ACCESS.indexOf(userProfile.tier) : 0;
    const requiredTierIndex = TIER_ACCESS.indexOf(pillar.requiredTier as UserTier);
    const isLocked = currentTierIndex < requiredTierIndex;

    return (
        <button
          key={pillar.id}
          onClick={() => handlePillarClick(pillar)}
          className={cn(
            "group relative flex flex-col items-center justify-center w-16 h-16 sm:w-20 sm:h-20 rounded-full text-center transition-all shadow-sm btn-3d",
            pillar.bgColor,
            pillar.color,
            pillar.borderColor
          )}
        >
          {isLocked && <div className="absolute inset-0 bg-black/50 rounded-full" />}
          <Icon className={cn("h-8 w-8 sm:h-10 sm:h-10 transition-transform group-hover:scale-110", isLocked && "opacity-50")} />
          {isLocked && <Lock className="h-4 w-4 absolute top-2 right-2 sm:top-3 sm:right-3 text-white/70" />}
        </button>
      )
  }

  const renderChallengeSection = () => {
    if (isLoadingChallenge) {
      return <Skeleton className="h-40 w-full rounded-xl" />;
    }

    if (!latestChallenge) {
      return (
         <Card className="bg-primary/10 border-primary/20 hover:border-primary/40 transition-all">
            <CardContent className="p-4 flex items-center gap-4">
            <div className="relative w-24 h-24 rounded-lg overflow-hidden flex-shrink-0 bg-primary/20 flex items-center justify-center">
                <Trophy className="w-12 h-12 text-primary/50" />
            </div>
            <div className="flex-1 space-y-2">
                <div>
                <h3 className="font-bold text-lg text-card-foreground leading-tight">No Active Challenges</h3>
                <p className="text-xs text-muted-foreground line-clamp-2">Check back soon for the next community challenge, or view past challenges to see what you've missed!</p>
                </div>
                <Button size="sm" className="w-full sm:w-auto" onClick={onOpenChallenges}>
                    View All Challenges <ArrowRight className="ml-2 h-4 w-4" />
                </Button>
            </div>
            </CardContent>
        </Card>
      )
    }

    return (
       <Card className="bg-primary/10 border-primary/20 hover:border-primary/40 transition-all">
        <CardContent className="p-4 flex items-center gap-4">
          <div className="relative w-24 h-24 rounded-lg overflow-hidden flex-shrink-0">
            <Image src={latestChallenge.thumbnailUrl || "https://placehold.co/400x400.png"} alt={latestChallenge.name} fill className="object-cover" unoptimized/>
          </div>
          <div className="flex-1 space-y-2">
            <div>
              <Badge variant="secondary" className="mb-1">Active Now</Badge>
              <h3 className="font-bold text-lg text-card-foreground leading-tight">{latestChallenge.name}</h3>
              <p className="text-xs text-muted-foreground line-clamp-2">{latestChallenge.description}</p>
            </div>
            <Button size="sm" className="w-full sm:w-auto" onClick={onOpenChallenges}>
                View Challenge <ArrowRight className="ml-2 h-4 w-4" />
            </Button>
          </div>
        </CardContent>
      </Card>
    );
  };

  const isEducationalModalLocked = userProfile && educationalModalContent ? TIER_ACCESS.indexOf(userProfile.tier) < TIER_ACCESS.indexOf(educationalModalContent.requiredTier) : false;

  return (
    <div className="space-y-6 pb-10">
        <div>
            <h2 className="text-2xl font-bold tracking-tight">Welcome, {userProfile?.fullName.split(' ')[0]}!</h2>
            <p className="text-lg text-muted-foreground">
            &ldquo;{quoteOfTheDay}&rdquo; ~Alan Roberts
            </p>
        </div>
      
      <div className="flex justify-around">
        {topRowButtons.map(renderPillarButton)}
      </div>

      <div className="flex justify-around">
        {bottomRowButtons.map(renderPillarButton)}
      </div>
      
       {userProfile?.tier === 'free' && (
        <div className="my-2">
          <GoogleAd slotId={process.env.NEXT_PUBLIC_AD_SLOT_ID_1!} />
        </div>
      )}
      
      {renderChallengeSection()}
      
      {isLoadingIndulgences ? (
          <Skeleton className="h-24 w-full" />
      ) : upcomingIndulgences.length > 0 && (
         <Card className="p-3">
          <CardContent className="p-0">
            <h3 className="text-sm font-semibold flex items-center gap-2 mb-2">
              <Salad className="h-5 w-5 text-lime-400" />
              Upcoming Planned Indulgences
            </h3>
            <div className="space-y-1">
              {upcomingIndulgences.map(plan => (
                <button 
                  key={plan.id}
                  onClick={() => handleOpenCalendarForIndulgence(plan.indulgenceDate)}
                  className="flex items-center justify-between p-1.5 rounded-md bg-muted/50 text-xs w-full hover:bg-muted"
                >
                  <p className="font-medium">{plan.plannedIndulgence}</p>
                  <p className="text-muted-foreground">{format(new Date(plan.indulgenceDate), 'MMM d')}</p>
                </button>
              ))}
            </div>
          </CardContent>
        </Card>
      )}

      {userProfile && (liveBingeFreeSince || userProfile.bingeFreeSince) && (
        <Card className="p-3">
            <CardContent className="p-0 flex items-center justify-between gap-4">
                <div className="flex-1">
                    <p className="text-sm font-semibold text-green-400">Binge-Free Streak</p>
                     <p className="text-xs text-muted-foreground">
                        {`Last binge: ${format(new Date((liveBingeFreeSince || userProfile.bingeFreeSince) as number), 'MMM d, yyyy')}`}
                    </p>
                </div>
                <div className="flex items-center gap-2">
                    <div className="flex items-baseline gap-1 text-right">
                        <p className="text-4xl font-bold text-white">{bingeFreeDays}</p>
                        <p className="text-lg text-muted-foreground">Days</p>
                    </div>
                     <Button variant="ghost" size="icon" className="h-8 w-8 text-muted-foreground" onClick={() => setIsResetStreakAlertOpen(true)}>
                        <RefreshCw className="h-4 w-4" />
                    </Button>
                </div>
            </CardContent>
        </Card>
      )}

      {activePillar && (
        <DataEntryDialog
          open={dataEntryDialogOpen}
          onOpenChange={handleDataEntryDialogClose}
          pillar={activePillar}
        />
      )}
      
      <InsightsDialog 
        isOpen={insightsDialogOpen}
        onClose={() => setInsightsDialogOpen(false)}
      />
      
      {isMounted && educationalModalContent && (
        <FirstUseEducationalModal 
            isOpen={isEducationalModalOpen}
            onClose={handleEducationalModalClose}
            onConfirm={handleEducationalModalConfirm}
            content={educationalModalContent}
            isLocked={isEducationalModalLocked}
        />
      )}
      
       {userProfile && (
        <CalendarDialog
            isOpen={isCalendarOpen}
            onClose={() => setIsCalendarOpen(false)}
            client={userProfile as ClientProfile}
            initialDate={initialCalendarDate}
        />
       )}
       
        <AlertDialog open={isResetStreakAlertOpen} onOpenChange={setIsResetStreakAlertOpen}>
            <AlertDialogContent>
                <AlertDialogHeader>
                    <AlertDialogTitle>Are you sure?</AlertDialogTitle>
                    <AlertDialogDescription>
                        This will reset your binge-free streak to 0 days. This action cannot be undone.
                    </AlertDialogDescription>
                </AlertDialogHeader>
                <AlertDialogFooter>
                    <AlertDialogCancel>Cancel</AlertDialogCancel>
                    <AlertDialogAction onClick={handleResetStreak} disabled={isResettingStreak}>
                         {isResettingStreak && <Loader2 className="mr-2 h-4 w-4 animate-spin" />}
                        Reset Streak
                    </AlertDialogAction>
                </AlertDialogFooter>
            </AlertDialogContent>
        </AlertDialog>
    </div>
  );
}
